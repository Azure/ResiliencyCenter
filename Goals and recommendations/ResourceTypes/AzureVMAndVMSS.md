# Azure VM and VMSS Zone Resiliency

Use the table below as a decision guide for zone resiliency options for standalone Azure virtual machines and Virtual Machine Scale Sets (VMSS). Each option balances cost, RPO/RTO, operational complexity, and redeployment effort—compare the trade-offs to select the approach that best meets your application availability and maintenance requirements.

> [!NOTE]
>
> - Resiliency Center currently marks a VM as resilient when Azure Site Recovery (ASR) with zonal disaster recovery is enabled. Other valid architectures—such as VMSS Flex, multi-zone single-instance VMs with application-level replication, or shared ZRS data disks—may provide equivalent resiliency but are not yet automatically detected.
> - If you use an alternative solution that Resiliency Center cannot detect, [manually attest](../ViewResiliencePosture.md#scenario-2-manually-attest-resources) the VM in Resiliency Center to prevent incorrect recommendations. Detection coverage will improve in a future release.

The below table describes the recommended actions to be taken for ensuring zone resiliency of standalone virtual machines ansd virtual machine scale sets. The option you choose has a tradeoff between cost, RPO/RTO, redeployment effort needed and so on. Use the below table to evaluate the suitable option for your specific scenario.

| Scenario                                         | Recommendation                                                                                                                                                                                                                                                           | Cost impact                                                                                  |
|--------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------|
| Standalone regional VM (Pre-requisite only)<br>Regional VMSS (Pre-requisite only) | Add as pre-requisite guidance for all zonal resiliency recommendation to migrate VM / VMSS from regional to zonal configuration. Requires re-deployment of VM.                                                                     | NA                                                                                          |
| Standalone single-zone VM (Zonal resiliency)      | **P1 - RTO <15 minutes:**<br>- [Attach VM to VMSS Flex](https://learn.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-attach-detach-vm?tabs=portal-1%2Cportal-2%2Cportal-3) with zone spreading and multiple VM instances. For all applications:<br>- Disable strict zone balancing.<br>- Enable automatic instance repair with app-health extension.<br>- Regional DR (ASR) is supported via PowerShell only.<br>For stateful applications:<br>- Disable auto-OS upgrade<br>- Disable auto-scaling / Scaling profile.<br>- Support for application-level replication OR [shared ZRS data disk architecture](https://azure.microsoft.com/blog/improve-availability-with-zoneredundant-storage-for-azure-disk-storage/) required.<br>- Deploy multi-zonal VM architecture using app-level replication OR shared ZRS data disks.<br>**P2 - RTO 60 minutes with >5 minutes RPO:**<br>- Enable Azure site recovery (ASR) zonal replication.<br>- Limits end user ability to enable regional DR for same VM. | Cost impact:<br>- Multi-zonal deployment<br>- ZRS disks. (if not already in use).<br>- ASR replication |
| Multi-zone VM (Zonal resiliency)                  | End user needs to attest that VM is deployed as multi-zone in service group definition and is already zonally resilient.                                                                                                           | NA                                                                                          |
| Multi-zone VMSS (Zonal resiliency)                | **P1 - Performance RTO <15 minutes:**<br>- Enable application health extensions to detect unavailability of VM instance.<br>- Enable automatic instance repair policy.<br>- RPO determined by native application-level replication RPO.<br>_ASR support for VMSS Flex resources limited to PowerShell only._ | NA                                                                                          |
